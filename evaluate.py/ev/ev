from jiwer import wer
from parsers.pymupdf_parser import extract_text as pymupdf_extract
from parsers.pdfplumber_parser import extract_text as pdfplumber_extract
from parsers.pypdf2_parser import extract_text as pypdf2_extract

PARSERS = {
    "PyMuPDF": pymupdf_extract,
    "pdfplumber": pdfplumber_extract,
    "PyPDF2": pypdf2_extract
}

pdf_path = "sample.pdf"
gt_path = "sample.txt"

with open(gt_path, "r", encoding="utf-8") as f:
    ground_truth = f.read()

for name, func in PARSERS.items():
    extracted = func(pdf_path)
    score = wer(ground_truth, extracted)
    print(name, "WER:", score)
